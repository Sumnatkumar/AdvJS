<script>

//Async/await

/*There's a specail syntax to work promises in a more comfortable fashion,
called "async/await".It's surprisingly easy to understand and use.

The word "async" before a function means one simple thing: a function always
returns a promise.It

So the async keyword is added to functions to tell them to return return a promise rather
than directly returning the Value.

we can use await when calling any function that returns a Promise, including
web API functions.

The keyword await makes JavaScript wait until that promise settles and returns
its result.*/

 
    const pobj1 = new Promise( (resolve, reject) =>{

        setTimeout(() =>{
            let roll_no = [1,2,3,4,5];
            resolve(roll_no);
            //reject('Error while communicating');
        }, 2000);
    });
     const getBiodata = (indexdata) => {
         return new Promise ( (resolve, reject) =>{
 
             setTimeout ( (indexdata) => {
                 let biodata = {
                     name : 'Sumant',
                     age : 26
                 }
                 resolve(`My roll no is ${indexdata}. My name is ${biodata.name} and I am ${biodata.age} years old.`);
             }, 2000, indexdata)
         });
     }
    
 // ..promise consume
 /*pobj1.then((rollno) => {
     console.log(rollno);
     return getBiodata(rollno[1]);
 }).then( (kuchbhi) => {
     console.log(kuchbhi);
 })
 .catch((error)=>{
     console.log(error);
 })
 //catch*/

 async function getData(){

    try{    
        const rollnodata = await pobj1;
        console.log(rollnodata);
        const biodata = await getBiodata(rollnodata[1]);
        console.log(biodata);
        return biodata;
    }catch(error){
        console.log(`The Error : ${error}`);
    }
 }

 const getname = getData().then((myname) => {
    console.log(myname);
 });
 </script>